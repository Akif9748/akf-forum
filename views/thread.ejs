<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="/css/styles.css" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    <%= thread.title %>
  </title>
  <meta name="description" content="Thread page of Akf-forum!">
  <meta name="author" content="Akif9748">
  <link rel="icon" type="image/x-icon" href="/images/favicon.jpg">

</head>


<body>
    <script src="/js/scripts.js"></script>
    <div id="admin"></div>
    <script>  if (<%= user.admin %>) admin();  </script>
    
    <!-- Navbar: -->
    <a href="/"><img class="logo" src="/images/logo.jpg" alt="AKF-FORUM"></a>
    <div class="navbar" id="navbar">

        <a href="/threads">THREADS</a>
        <a href="/users">USERS</a>
        <a href="/search">SEARCH</a>
        <a href="/threads/open/">OPEN THREAD</a>

        <div style="float: right;" class="user" id="user">
            <a href = <%= user.getLink() %> > <h1> <%= user.name %><img class="yuvarlak" src=<%=user.avatar %> alt=<%= user.name %>> </h1>  </a>
        </div>
    </div>
    <hr>
    <!-- Navbar end -->

  <h1 style="font-size: 35px;">
    <%= thread.title %>
  </h1>




  <br>
  <% messages.forEach(message=>{ %>

    <div id= <%= "message-" + message.id %> style="border: 2px solid #444444; padding: 5px;">
      <h2>
        <img class="yuvarlak" src=<%=message.author.avatar %> alt=<%= message.author.name %>>
          <a style="  color: #bcbcbc;  " href=<%="/users/" + message.author.id %>> <%= message.author.name %></a>:
      </h2>

      <h2>
        <%= message.content %>
      </h2>
      <form style="text-align:right;display:inline;" action="/message/delete/<%= message.id %>" method="post">
        <button style="display:inline;" class="button" type="submit">DELETE</button>
      </form>


      <form style="display:inline;" action="/message/<%= message.id %>" method="delete">
      </form>
      <form style="text-align:right;" action="/message/react/<%= message.id %>" method="POST">

        <h3 style="display:inline;">
          <%= Object.values(message.react).filter(Boolean).length - Object.values(message.react).filter(x=>!x).length %>
        </h3>


        <button style="display:inline;" class="button" name="like" type="submit">+ðŸ”¼</button>
        <button style="display:inline;" class="button" name="dislike" type="submit">-ðŸ”½</button>
        <h3 style="display:inline;">
          <%=new Date(message.time).toLocaleString() %>
        </h3>
      </form>
    </div>

    <br>
    <% }); %>

      <hr>


      <form action="/message" method="POST">
        <textarea rows="4" cols="50" name="content"></textarea>
        <input name="threadID" type="hidden" value="<%= thread.id %>"></input>

        <br>

        <button class="button" type="submit">Send!</button>
      </form>


      <!-- This website is powered by AKF-Forum -->
</body>

</html>